# 스마트 응급의료 빅데이터 플랫폼 소개


## 1. 개요
  - 응급환자 재이송률 및 이송시간 단축을 통한 골든타임 확보
  - 스마트 응급의료 빅데이터 플랫폼 사업단의 대상은 연구자, 의료진, 국민
  - (연구자) 실시간 정보 공유
    - 환자 상태, 응급처치 상황, 이송 경로 등 중요한 정보를 관련 의료진 및 기관과 즉시 공유
    - 개방형 강화, 즉 응급의료 빅데이터의 공유, 상호 호환성 강화, 아이디어·지식·자원을 공유하는 개방형 혁신 강화 목표
  - (의료진) 환자 이송 병원 신속 결정
    - 환자 이송 과정에서 신속하고 정확한 결정 지원
    - 데이터 활용 생태계 체계 확립, 즉 센터 간의 유기적이고 체계화 된 네트워크 조성을 통해 응급의료 빅데이터 활용 증대
  - (국민) 골든타임 확보
    - 골든타임 내 적절한 응급처치와 이송
    - 국민을 대상으로 보다 나은 서비스 제공

![image](https://github.com/user-attachments/assets/0564ca83-b51f-4495-b82d-53a8c2c76062)

---

## 2. 플랫폼 구성도
  - 데이터 시각화를 통해 누구나 쉽게 응급의료 데이터를 분석하고 활용
  - 실시간 자원 연계를 통해 환자 이송 병원 결정과 응급처치 정보 공유 등 응급의료 조정과 대응의 효율성 증대
  - 자동차사고 심층조사 분석를 통해 사고 예방과 신속하고 최적화된 응급의료 대응 방안을 개선하는 데 기여
    
![image](https://github.com/user-attachments/assets/d2683837-e82f-47f6-87ca-59ac7a7ff783)

---

## 3. 빅데이터 분석 포털 기능
  - 메타 데이터 조회
    - 메타 데이터 조회를 통한 데이터 속성 파악
    - 특정 연구 목적에 맞는 데이터를 선택적으로 조회하여 필요한 데이터를 빠르게 구성함으로써 분석을 더욱 신속하고 정확하게 진행할 수 있게하는 기능
  - 충청북도와 전국 데이터 비교
    - 충청북도 소재 참여병원에서 수집된 응급의료 데이터를 전국 응급의료 데이터와 비교분석할 수 있는 기능
    - 지역별 응급의료 서비스의 차이를 파악하고, 충청북도 응급의료 체계를 개선하는 데 필요한 구체적인 인사이트 도출 가능      
  - 데이터 접근 및 분석
    - 일반 사용자에게 공개된 통계성 데이터를 기반으로 분석 및 시각화 서비스를 이용하는 기능
    - IRB를 갖춘 권한자에 한해 NEDIS 자료 및 자동차사고 심층조사 분석 데이터를 활용     
  - 구급-병원 데이터 연계
    - 구급 단계와 병원 단계의 데이터를 통합적으로 분석하기 위해 확률적 매칭 방법(Propensity Score Matching, PSM)을 사용한 구급-병원 데이터 연계 기능

![image](https://github.com/user-attachments/assets/3a9ad84a-6d71-4e09-a7d6-1713226a9728)

---

## 4. 응용서비스
  - 국가응급진료정보망(NEDIS)
    - 국가응급의료정보망(National Emergency Department Information System, NEDIS)은 응급이송 환자의 치료 정보를 실시간으로 제공하는 시스템
    - EMS는 도내 참여병원의 NEDIS 데이터를 실시간으로 연계하여 응급의료체계 각 단계에서 필요한 병원의 자원 정보와 응급 환자 진료 정보를 관계자들에게 제공
    - 또한, 맞춤형 연구자료-NEDIS를 기반으로 분석된 자료를 제공하여 응급의료 정책 수립과 연구 분석에 활용할 수 있도록 지원

![image](https://github.com/user-attachments/assets/d1a87d2b-7626-4943-98b6-3012caa96a6d)
      
  - 자동차사고 심층조사 분석 서비스
    - 본 서비스는 실사고 조사 기반의 자동차사고 심층조사 분석자료(Korean In-Depth Accident Study, KIDAS) 데이터베이스 구축을 기반으로 교통사고 환자의 손상기전 연구를 통하여 자동차 사고에 의한 인체손상기전을 분석하여 사고예방과 치료기술 및 시스템 개발을 주요 목적
    - 자동차사고 응급환자의 중증도를 신속하게 분류하는 진단 지원 시스템
    - 실시간 데이터를 활용해 정확한 중증도 평가를 제공하며, 의료진이 신속한 의사결정 지원
    - 연세대학교 원주의과대학 자동차의과학연구소(Automotive Medical Science Research Institute) 및 충북대학교병원 응급의학과와 함께 응급의학, 손상, 응급의료체계, 자동차의학 등에 대하여 연구

![image](https://github.com/user-attachments/assets/3744f18b-1b6d-49c1-ad94-f0188118b791)

  - 응급의료 상황 정보
    - 스마트 응급의료 빅데이터 플랫폼에서 제공하는 응급환자이송 상황판은 구급이송 상황에서 환자정보와 병원의 응급자원정보를 연계하여 충청북도 응급의료조정을 위한 중추적 역할을 담당
    - 응급환자이송 상황판은 충북 응급의료지원단에 설치되어 이송 환자의 분류정보를 병원과 공유하고, 환자 전원을 위한 응급의료 조정 지원

![image](https://github.com/user-attachments/assets/37c50118-08c2-49f8-86b9-0c9adbbd087e)

  - 참여병원 상황정보
    - 응급실 도착 전 환자 정보를 공유해 응급환자 대응을 효율화하고, 골든타임을 확보하는 것을 목표
    - 도착 예정 구급차 정보, 환자의 기본 정보, 중증도 및 손상 현황 등 응급환자 이송 현황을 실시간으로 제공
    - 응급실 혼잡도, 평균 체류 시간, 응급환자 및 질병 비율, 119 구급차 이용 비율 정보도 함께 제공해 응급실 상황을 종합적으로 파악
    - 병원 대시보드 서비스는 실시간 구급(소방) 데이터와 참여 병원의 NEDIS 연계 데이터를 바탕으로 구현

    ---

# EMS-PSM-Algorithm

## 1. 개요

  - SFM-NEDIS Gmatch 알고리즘은 emergency.csv와 119.csv 두 개의 다른 소스에서 환자 기록을 병원 코드, 성별, 내원 날짜 및 연령과 같은 다양한 속성을 기준으로 매칭하는 도구
  - 매칭 과정에서는 연령과 내원 시간의 유클리드 거리를 계산하여 가장 가까이 위치한 일치되는 항목 매칭
  - 결과는 nedis_patient_care_reports_mtchg.csv라는 CSV 파일에 저장

## 2. 사전 요구 사항
2.1 필요한 Python 패키지
 - pandas
 - numpy
 - argparse

※ 필요한 패키지는 다음 명령어를 통해 설치
```
pip install pandas numpy argparse
```

## 3. 사용 파일
3.1 emergency.csv 응급실 기록을 포함하며, 다음과 같은 관련 열이 포함
  - ptmiindt 내원 날짜 (YYYYMMDD 형식)
  - ptmiintm 내원 시간 (HHMMSS 형식)
  - ptmiemnm 병원 코드
  - ptmisexx 환자 성별
  - ptmibrtd 환자 나이

3.2 119.csv 119 응급 기록을 포함하며, 다음과 같은 관련 열이 포함
    - hosp_id 병원 코드
    - pat_gender 환자 성별
    - pat_age 환자 나이
    - arrived_atage 도착 시간 (타임스탬프 형식)


## 4. 사용 방법
4.1 명령줄 인자 병원도착날짜 기준
   - --start_date 시작 날짜, YYYYMMDD 형식 (필수).
   - --end_date 종료 날짜, YYYYMMDD 형식 (필수).

※ 사용 예
```
python script.py --start_date 20220101 --end_date 20221231
```

4.2 CSV 파일
   - emergency.csv와 119.csv 파일을 스크립트와 동일한 디렉토리에 위치

4.3 스크립트 실행
   - 스크립트는 두 CSV 파일을 읽고, 관련 필드를 추출한 후 병원 코드, 성별, 내원 날짜 및 연령과 내원 시간을 이용해 계산된 유클리드 거리를 기반으로 매칭을 수행

4.4 출력
   - 매칭된 기록은 nedis_patient_care_reports_mtchg.csv라는 파일에 동일한 디렉토리에 저장

## 5. 상세 워크플로우

5.1 데이터 파싱
   - 스크립트는 먼저 emergency.csv와 119.csv 파일을 로드
   - 날짜 및 시간 열을 파싱하고 형식 통일

5.2 병원 코드 매핑
   - 스크립트는 사전에 정의된 병원 매핑 테이블을 사용하여 emergency.csv의 병원 코드와 119.csv의 병원 코드 연결

5.3 매칭 수행
   - 성별, 병원 코드, 내원 날짜 및 시간, 그리고 유클리드 거리 계산을 통해 가장 가까운 일치를 찾음.

5.4 결과 저장
   - 최종 매칭 결과는 nedis_patient_care_reports_mtchg.csv 파일로 저장


    
<!---
emsbigdata/emsbigdata is a ✨ special ✨ repository because its `README.md` (this file) appears on your GitHub profile.
You can click the Preview link to take a look at your changes.
--->
